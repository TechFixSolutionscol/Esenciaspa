<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda - Línea Siloé | Esencia Spa</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/landing.css">
    <link rel="stylesheet" href="css/tienda.css">
</head>

<body>
    <!-- Particles Background -->
    <div class="particles-container" id="particles"></div>

    <!-- Navbar -->
    <nav class="navbar scrolled" id="navbar">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo">
                <img src="assets/images/icon.png" alt="Esencia Spa Logo" class="nav-logo-img">
                <span>Esencia Spa</span>
            </a>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../index.html" class="nav-link">Inicio</a></li>
                <li><a href="#" class="nav-link active">Línea Siloé</a></li>
                <li><a href="servicios.html" class="nav-link">Servicios</a></li>
                <li class="cart-link">
                    <a href="#" onclick="toggleCart(event)" class="nav-link">
                        🛒 Carrito <span id="cart-count"
                            style="background: #8b5cf6; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem; margin-left: 4px;">0</span>
                    </a>
                </li>
            </ul>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Store Page Content -->
    <div class="store-page">
        <!-- Hero Section -->
        <section class="store-hero">
            <div class="store-hero-content">
                <p class="brand-subtitle">Armonía Para Tu Vida</p>
                <h1>SILOÉ COSMETICS</h1>
                <p class="store-tagline">Línea Vital de Alta Eficacia</p>
                <p class="store-description">
                    Entendemos que la verdadera belleza comienza con la salud. Por eso, hemos desarrollado la Línea
                    Vital para el cuidado de tus pies, una solución especializada y de alta eficacia diseñada
                    exclusivamente para combatir infecciones fúngicas tanto en la planta del pie como en las uñas.
                    ¡Recupera tu salud y tu seguridad!
                </p>
            </div>
        </section>

        <!-- Store Container -->
        <div class="section-container">
            <div class="store-wrapper" <section class="store-section" id="store-main">
                <div class="products-grid">
                    <div class="product-card">
                        <div class="product-image">
                            <img src="assets/images/aceitevital.jpg" alt="Aceite Vital">
                        </div>
                        <div class="product-info">
                            <h3>Aceite Vital</h3>
                            <p class="product-size">20 ml | 100% artesanal</p>
                            <p class="product-description">Aceites puros de origen natural. Regenerador, hidratante y
                                reparador cutáneo.</p>
                            <div class="product-footer">
                                <span class="product-price">$20.000</span>
                                <button class="add-to-cart-btn"
                                    onclick="addToCart({id: 1, name: 'Aceite Vital 20ml', price: 20000, image: 'assets/images/aceitevital.jpg'})">+
                                    Agregar</button>
                            </div>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="product-image">
                            <img src="assets/images/medivital.jpg" alt="MediVital">
                        </div>
                        <div class="product-info">
                            <h3>MediVital</h3>
                            <p class="product-size">30 ml | Solución tópica</p>
                            <p class="product-description">Solución ungueal para el tratamiento de infecciones por
                                hongos en las uñas.</p>
                            <div class="product-footer">
                                <span class="product-price">$35.000</span>
                                <button class="add-to-cart-btn"
                                    onclick="addToCart({id: 2, name: 'MediVital 30ml', price: 35000, image: 'assets/images/medivital.jpg'})">+
                                    Agregar</button>
                            </div>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="product-image">
                            <img src="assets/images/crema.jpg" alt="FungiVital Crema">
                        </div>
                        <div class="product-info">
                            <h3>FungiVital Crema</h3>
                            <p class="product-size">30 gr | Crema</p>
                            <p class="product-description">Con aceites puros y extractos naturales. Refrescante,
                                reparadora e hidratante para los pies.</p>
                            <div class="product-footer">
                                <span class="product-price">$25.000</span>
                                <button class="add-to-cart-btn"
                                    onclick="addToCart({id: 3, name: 'FungiVital Crema 30gr', price: 25000, image: 'assets/images/crema.jpg'})">+
                                    Agregar</button>
                            </div>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="product-image featured">
                            <img src="assets/images/kit.jpg" alt="Kit 1">
                            <span class="badge">KIT</span>
                        </div>
                        <div class="product-info">
                            <h3>Kit 1</h3>
                            <p class="product-size">Aceite Vital + MediVital</p>
                            <p class="product-description">Tratamiento completo para infecciones causadas por hongos en
                                las uñas.</p>
                            <div class="product-footer">
                                <span class="product-price">$50.000</span>
                                <button class="add-to-cart-btn"
                                    onclick="addToCart({id: 4, name: 'Kit 1 (Aceite + MediVital)', price: 50000, image: 'assets/images/kit.jpg'})">+
                                    Agregar</button>
                            </div>
                        </div>
                    </div>

                    <div class="product-card">
                        <div class="product-image featured">
                            <img src="assets/images/kit2.jpg" alt="Kit 2">
                            <span class="badge">KIT COMPLETO</span>
                        </div>
                        <div class="product-info">
                            <h3>Kit 2</h3>
                            <p class="product-size">Aceite Vital + MediVital + FungiVital</p>
                            <p class="product-description">Kit completo para el tratamiento integral de hongos en uñas.
                            </p>
                            <div class="product-footer">
                                <span class="product-price">$70.000</span>
                                <button class="add-to-cart-btn"
                                    onclick="addToCart({id: 5, name: 'Kit 2 (Aceite + MediVital + FungiVital)', price: 70000, image: 'assets/images/kit2.jpg'})">+
                                    Agregar</button>
                            </div>
                        </div>
                    </div>

                    <div class="product-card promo">
                        <div class="product-image">
                            <div class="promo-content">
                                <h3>Descuentos</h3>
                                <div class="promo-details">
                                    <p><strong>Desde 6 productos:</strong> 10% Desc</p>
                                    <p><strong>Desde 10 productos:</strong> 15% Desc</p>
                                </div>
                            </div>
                        </div>
                        <div class="product-info">
                            <p class="product-description">Consulta nuestras promociones por cantidad. Al por mayor
                                tienes ventajas exclusivas.</p>
                        </div>
                    </div>
                </div>
                </section>

                <aside class="cart-sidebar" id="cart-sidebar">
                    <div class="cart-header">
                        <h2>Tu Carrito</h2>
                        <button class="close-cart" onclick="toggleCart()">✕</button>
                    </div>

                    <div class="cart-items-container" id="cart-items-list">
                        <div class="empty-cart">
                            <p>Tu carrito está vacío</p>
                            <p class="small-text">Agrega productos para comenzar tu compra</p>
                        </div>
                    </div>

                    <div class="cart-footer">
                        <div class="cart-summary">
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="subtotal">\</span>
                            </div>
                            <div class="summary-row discount" id="discount-row" style="display: none;">
                                <span>Descuento:</span>
                                <span id="discount">-\</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total:</span>
                                <span id="total">\</span>
                            </div>
                        </div>

                        <button class="checkout-btn" id="checkout-btn" onclick="proceedToCheckout()">Proceder al
                            Pago</button>
                        <button class="clear-cart-btn" id="clear-btn" onclick="clearCart()"
                            style="display: none;">Limpiar
                            Carrito</button>
                    </div>
                </aside>
            </div>
        </div>

        <!-- Shipping Info -->
        <section class="section-container">
            <div class="shipping-info">
                <h3>🚚 Información de Entrega</h3>
                <div class="shipping-grid">
                    <div class="shipping-item">
                        <h4>Itagüí y cercanos</h4>
                        <p>Realizamos entregas en Itagüí y municipios cercanos</p>
                    </div>
                    <div class="shipping-item">
                        <h4>Tiempo de entrega</h4>
                        <p>1-3 días hábiles en Itagüí</p>
                    </div>
                    <div class="shipping-item">
                        <h4>Otras zonas</h4>
                        <p>Consulta disponibilidad y costos de envío</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Floating WhatsApp Button -->
    <div class="whatsapp-float" onclick="openWhatsApp()">
        <img src="assets/images/whatsapp_icon.png" alt="WhatsApp" class="whatsapp-icon">
    </div>

    <script src="js/landing.js"></script>
    <script>
        const CART_KEY = 'esenciaSpaCart';
        const WHATSAPP_PHONE = '+573023946941';
        let cart = [];

        document.addEventListener('DOMContentLoaded', function () {
            loadCart();
            updateCartUI();
        });

        function saveCart() {
            localStorage.setItem(CART_KEY, JSON.stringify(cart));
            updateCartUI();
        }

        function loadCart() {
            const saved = localStorage.getItem(CART_KEY);
            cart = saved ? JSON.parse(saved) : [];
        }

        function addToCart(product) {
            const existing = cart.find(item => item.id === product.id);

            if (existing) {
                existing.quantity += 1;
            } else {
                product.quantity = 1;
                cart.push(product);
            }

            saveCart();
            showNotification(product.name + ' agregado al carrito');
        }

        function updateQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);

            if (item) {
                if (newQuantity > 0) {
                    item.quantity = newQuantity;
                } else {
                    removeFromCart(productId);
                    return;
                }
                saveCart();
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            showNotification('Producto eliminado del carrito');
        }

        function clearCart() {
            if (cart.length > 0 && confirm('¿Estás seguro de que quieres vaciar el carrito?')) {
                cart = [];
                saveCart();
            }
        }

        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const cartItemsList = document.getElementById('cart-items-list');
            const subtotalEl = document.getElementById('subtotal');
            const discountEl = document.getElementById('discount');
            const discountRow = document.getElementById('discount-row');
            const totalEl = document.getElementById('total');
            const checkoutBtn = document.getElementById('checkout-btn');
            const clearBtn = document.getElementById('clear-btn');

            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;

            if (cart.length === 0) {
                cartItemsList.innerHTML = '<div class="empty-cart"><p>Tu carrito está vacío</p><p class="small-text">Agrega productos para comenzar tu compra</p></div>';
                subtotalEl.textContent = '$0';
                discountRow.style.display = 'none';
                totalEl.textContent = '$0';
                checkoutBtn.disabled = true;
                clearBtn.style.display = 'none';
                return;
            }

            cartItemsList.innerHTML = cart.map(item => '<div class="cart-item"><div class="cart-item-image"><img src="' + item.image + '" alt="' + item.name + '"></div><div class="cart-item-details"><h4>' + item.name + '</h4><p>\$' + item.price.toLocaleString('es-CO') + '</p><div class="cart-item-quantity"><button class="qty-btn" onclick="updateQuantity(' + item.id + ', ' + (item.quantity - 1) + ')">−</button><span class="qty-display">' + item.quantity + '</span><button class="qty-btn" onclick="updateQuantity(' + item.id + ', ' + (item.quantity + 1) + ')">+</button><button class="remove-item" onclick="removeFromCart(' + item.id + ')">Eliminar</button></div></div></div>').join('');

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);

            let discount = 0;
            let discountPercent = 0;

            if (totalQuantity >= 10) {
                discountPercent = 15;
            } else if (totalQuantity >= 6) {
                discountPercent = 10;
            }

            discount = subtotal * (discountPercent / 100);
            const total = subtotal - discount;

            subtotalEl.textContent = '\$' + subtotal.toLocaleString('es-CO');

            if (discountPercent > 0) {
                discountEl.textContent = '-\$' + discount.toLocaleString('es-CO') + ' (' + discountPercent + '%)';
                discountRow.style.display = 'flex';
            } else {
                discountRow.style.display = 'none';
            }

            totalEl.textContent = '\$' + total.toLocaleString('es-CO');
            checkoutBtn.disabled = false;
            clearBtn.style.display = 'block';
        }

        function proceedToCheckout() {
            if (cart.length === 0) {
                alert('El carrito está vacío');
                return;
            }

            const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            let discountPercent = 0;
            if (totalQuantity >= 10) {
                discountPercent = 15;
            } else if (totalQuantity >= 6) {
                discountPercent = 10;
            }

            const discount = subtotal * (discountPercent / 100);
            const total = subtotal - discount;

            let message = '🛍️ *PEDIDO DE TIENDA LÍNEA SILOÉ*\n\n';
            message += '*Productos:*\n';

            cart.forEach(item => {
                message += '• ' + item.name + '\n';
                message += '  Cantidad: ' + item.quantity + ' × \$' + item.price.toLocaleString('es-CO') + '\n';
                message += '  Subtotal: \$' + (item.price * item.quantity).toLocaleString('es-CO') + '\n\n';
            });

            message += '*Resumen:*\n';
            message += 'Subtotal: \$' + subtotal.toLocaleString('es-CO') + '\n';

            if (discountPercent > 0) {
                message += 'Descuento (' + discountPercent + '%): -\$' + discount.toLocaleString('es-CO') + '\n';
            }

            message += '*TOTAL: \$' + total.toLocaleString('es-CO') + '*\n\n';
            message += '¿Podrías confirmar este pedido y el método de pago?';

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = 'https://wa.me/' + WHATSAPP_PHONE + '?text=' + encodedMessage;
            window.open(whatsappUrl, '_blank');

            // Limpiar carrito después de enviar a WhatsApp
            showNotification('Pedido enviado a WhatsApp. Carrito borrado.');
            cart = [];
            saveCart();
        }

        function toggleCart(event) {
            if (event) event.preventDefault();
            const sidebar = document.getElementById('cart-sidebar');
            sidebar.style.display = sidebar.style.display === 'none' ? 'flex' : 'none';
        }

        function showNotification(message) {
            const notif = document.createElement('div');
            notif.className = 'notification';
            notif.textContent = message;
            document.body.appendChild(notif);

            setTimeout(() => {
                notif.remove();
            }, 3000);
        }

        function openWhatsApp() {
            const message = 'Hola, tengo una consulta sobre los servicios de Esencia Spa';
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = 'https://wa.me/' + WHATSAPP_PHONE + '?text=' + encodedMessage;
            window.open(whatsappUrl, '_blank');
        }

        // Create gold particles for hero section
        function createGoldParticles() {
            const hero = document.querySelector('.store-hero');
            if (!hero) return;

            const particleCount = 25;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'gold-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                hero.appendChild(particle);
            }
        }

        // Initialize on load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', createGoldParticles);
        } else {
            createGoldParticles();
        }
    </script>
</body>

</html>